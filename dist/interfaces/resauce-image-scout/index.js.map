{"version":3,"file":"index.js","sources":["../../../src/interface/components/RISFullpageLoader.vue","../../../src/interface/components/RISFullpageLoader.vue?vue&type=template&id=7c48d9e3&lang.js","../../../node_modules/rollup-plugin-styles/dist/runtime/inject-css.js","../../../src/interface/components/RISImagePreview.vue","../../../src/interface/components/RISImagePreview.vue?vue&type=template&id=5bf5d602&lang.js","../../../src/interface/components/RISImage.vue","../../../src/interface/components/RISImage.vue?vue&type=template&id=35eec0b9&lang.js","../../../src/interface/components/RISImageGrid.vue","../../../src/interface/components/RISImageGrid.vue?vue&type=template&id=67b0a49f&lang.js","../../../src/interface/classes/QueryCache.ts","../../../src/interface/api/image-scout.js","../../../src/interface/interface.vue","../../../src/interface/interface.vue?vue&type=template&id=1b566c1a&lang.js","../../../src/interface/index.ts"],"sourcesContent":["<template>\n  <div class=\"v-fullpage-loader\">\n    <v-progress-circular x-large indeterminate />\n    <p>\n      <slot></slot>\n    </p>\n  </div>\n</template>\n\n<script>\nexport default {\n  name: 'ris-fullpage-loader'\n}\n</script>\n\n<style scoped>\n.v-fullpage-loader {\n  position: absolute;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  flex-direction: column;\n  width: 100%;\n  height: 100%;\n  top: 0;\n  left: 0;\n  right: 0;\n  bottom: 0;\n  background: var(--background-normal);\n  z-index: 10;\n}\n\n.v-progress-circular {\n  margin-bottom: var(--v-card-padding);\n}\n</style>\n","<template>\n  <div class=\"v-fullpage-loader\">\n    <v-progress-circular x-large indeterminate />\n    <p>\n      <slot></slot>\n    </p>\n  </div>\n</template>\n\n<script>\nexport default {\n  name: 'ris-fullpage-loader'\n}\n</script>\n\n<style scoped>\n.v-fullpage-loader {\n  position: absolute;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  flex-direction: column;\n  width: 100%;\n  height: 100%;\n  top: 0;\n  left: 0;\n  right: 0;\n  bottom: 0;\n  background: var(--background-normal);\n  z-index: 10;\n}\n\n.v-progress-circular {\n  margin-bottom: var(--v-card-padding);\n}\n</style>\n","var e=[],t=[];function n(n,r){if(n&&\"undefined\"!=typeof document){var a,s=!0===r.prepend?\"prepend\":\"append\",d=!0===r.singleTag,i=\"string\"==typeof r.container?document.querySelector(r.container):document.getElementsByTagName(\"head\")[0];if(d){var u=e.indexOf(i);-1===u&&(u=e.push(i)-1,t[u]={}),a=t[u]&&t[u][s]?t[u][s]:t[u][s]=c()}else a=c();65279===n.charCodeAt(0)&&(n=n.substring(1)),a.styleSheet?a.styleSheet.cssText+=n:a.appendChild(document.createTextNode(n))}function c(){var e=document.createElement(\"style\");if(e.setAttribute(\"type\",\"text/css\"),r.attributes)for(var t=Object.keys(r.attributes),n=0;n<t.length;n++)e.setAttribute(t[n],r.attributes[t[n]]);var a=\"prepend\"===s?\"afterbegin\":\"beforeend\";return i.insertAdjacentElement(a,e),e}}export{n as default};\n","<template>\n  <v-overlay :active=\"image?true:false\" @click=\"$emit('close',image)\">\n    <img class=\"image\" :src=\"image.url_preview\">\n  </v-overlay>\n</template>\n\n<script>\nexport default {\n  name: 'ris-image-preview',\n  props: {\n    image: {\n      type: Object,\n      required: true\n    }\n  }\n}\n</script>\n\n<style scoped>\n.image {\n  max-height: 90vh;\n  max-width: 90vw;\n  height: auto;\n  width: auto;\n}\n</style>\n","<template>\n  <v-overlay :active=\"image?true:false\" @click=\"$emit('close',image)\">\n    <img class=\"image\" :src=\"image.url_preview\">\n  </v-overlay>\n</template>\n\n<script>\nexport default {\n  name: 'ris-image-preview',\n  props: {\n    image: {\n      type: Object,\n      required: true\n    }\n  }\n}\n</script>\n\n<style scoped>\n.image {\n  max-height: 90vh;\n  max-width: 90vw;\n  height: auto;\n  width: auto;\n}\n</style>\n","<template>\n  <v-card :class=\"{'v-card--is-selected': isSelected}\">\n    <img\n      ref=\"img\"\n      :style=\"{height}\"\n      :src=\"image.url_thumb\"\n      :alt=\"image.description\"\n      @load=\"triggerRender\">\n    <div\n      class=\"card-hover-details\"\n      :class=\"{'card-hover-details--active':isSelected}\">\n      <div>\n        <v-button class=\"btn-action\"\n          x-small\n          v-if=\"image.attribution\"\n          :href=\"image.attribution.url\"\n          :title=\"image.attribution.name\">\n          <v-icon name=\"link\" class=\"btn-action-icon\" />\n          <span class=\"attribution-link\">{{image.attribution.name}}</span>\n        </v-button>\n      </div>\n      <div>\n        <v-button class=\"btn-action\"\n          x-small icon\n          v-if=\"image.url_preview\"\n          @click=\"$emit('preview', image)\">\n          <v-icon name=\"zoom_in\" />\n        </v-button>\n        <v-button class=\"btn-action\"\n          x-small icon\n          :disabled=\"!image.url_download\"\n          @click=\"$emit('select', image)\">\n          <v-icon :name=\"isSelected?'check_circle':'radio_button_unchecked'\" />\n        </v-button>\n      </div>\n    </div>\n  </v-card>\n</template>\n\n<script>\nexport default {\n  name: 'ris-image',\n  props: {\n    image: {\n      type: Object,\n      required: true\n    },\n    imagesSelected: {\n      type: Array\n    }\n  },\n  data() {\n    return {\n      height: 'auto',\n      needsSetHeight: true,\n    }\n  },\n  computed: {\n    isSelected() { return this.imagesSelected.includes(this.image.id) },\n  },\n  methods: {\n    triggerRender() {\n      this.height = 'auto';\n      this.$refs.img.dataset.risRendered = true\n      setTimeout(() => this.$el.dataset.risRendered = true, 500) // Wait 50ms before showing checkered bg\n    }\n  },\n  /**\n   * A Photo is 1600x1200px, but we only have space for an image of 400px wide.\n   * To find the new height of the image while preserving the aspect ratio\n   * Follow this calculation: ((origHeight / origWidth) x newWidth) = newHeight\n   * Flip based on landscape or portrait\n   */\n  mounted() {\n    const width = this.$el.clientWidth\n    const oldWidth = this.image.width\n    const oldHeight = this.image.height\n    this.height = Math.round((oldHeight / oldWidth) * width) + 'px'\n  }\n}\n</script>\n\n<style scoped>\n.btn-action {\n  padding: 0;\n  min-width: 0;\n\n  --v-button-color: #fff;\n  --v-button-color-hover: #ffffff99;\n  --v-button-color-activated: #ffffff99;\n  --v-button-color-disabled: #ffffffaa;\n\n  --v-button-background-color: transparent;\n  --v-button-background-color-hover: transparent;\n  --v-button-background-color-activated: transparent;\n  --v-button-background-color-disabled: transparent;\n}\n\n.btn-action:deep(.button.x-small) {\n  padding: 0;\n}\n\n.btn-action-icon {\n  margin-right: 5px;\n}\n\n.attribution-link {\n  max-width: 145px;\n  white-space: nowrap;\n  text-overflow: ellipsis;\n  overflow: hidden;\n}\n\n.container .v-card {\n  --ris-transition-time: 0.5s;\n  --v-card-min-width: 0;\n  --v-card-padding: 15px;\n  background: var(--background-normal);\n  break-inside: avoid-column;\n  margin-bottom: 5%;\n  position: relative;\n  overflow: hidden;\n  border-radius: var(--border-radius);\n  transition: transform var(--ris-transition-time);\n}\n\n.container .v-card img {\n  width: 100%;\n  height: auto;\n  vertical-align: middle;\n  border-radius: 0 !important;\n\n  opacity: 0;\n  transition: opacity var(--ris-transition-time);\n\n}\n\n.container .v-card img[data-ris-rendered=\"true\"] {\n  opacity: 1;\n}\n\n.container .v-card:hover {\n  transform: scale(0.975);\n}\n\n.card-hover-details {\n  position: absolute;\n  top: 0;\n  left: 0;\n  bottom: 0;\n  background-image: linear-gradient(0, black -25%, transparent 75%);\n  height: 100%;\n  width: 100%;\n  padding: calc(var(--v-card-padding) / 2);\n\n  display: flex;\n  justify-content: space-between;\n  align-items: flex-end;\n\n  opacity: 0;\n  pointer-events: none;\n}\n\n.card-hover-details--active,\n.v-card:hover .card-hover-details {\n  opacity: 1;\n  pointer-events: all;\n}\n\n.v-card,\n.v-card--is-selected,\n.card-hover-details,\n.v-card:hover .card-hover-details {\n  transition: all var(--ris-transition-time);\n}\n\n.container .v-card[data-ris-rendered=\"true\"] {\n  --checkerSize: 10px;\n  --checkerColor: lightgrey;\n  --checkerAltColor: var(--background-normal);\n\n  background-image:\n    linear-gradient(45deg, var(--checkerColor) 25%, transparent 25%),\n    linear-gradient(135deg, var(--checkerColor) 25%, transparent 25%),\n    linear-gradient(45deg, transparent 75%, var(--checkerColor) 75%),\n    linear-gradient(135deg, transparent 75%, var(--checkerColor) 75%);\n  background-color: var(--checkerAltColor);\n\n  background-size:\n    calc(2 * var(--checkerSize)) calc(2 * var(--checkerSize));\n\n  background-position:\n    0 0,\n    var(--checkerSize) 0,\n    var(--checkerSize) calc(-1 * var(--checkerSize)),\n    0px var(--checkerSize);\n\n}\n</style>\n","<template>\n  <v-card :class=\"{'v-card--is-selected': isSelected}\">\n    <img\n      ref=\"img\"\n      :style=\"{height}\"\n      :src=\"image.url_thumb\"\n      :alt=\"image.description\"\n      @load=\"triggerRender\">\n    <div\n      class=\"card-hover-details\"\n      :class=\"{'card-hover-details--active':isSelected}\">\n      <div>\n        <v-button class=\"btn-action\"\n          x-small\n          v-if=\"image.attribution\"\n          :href=\"image.attribution.url\"\n          :title=\"image.attribution.name\">\n          <v-icon name=\"link\" class=\"btn-action-icon\" />\n          <span class=\"attribution-link\">{{image.attribution.name}}</span>\n        </v-button>\n      </div>\n      <div>\n        <v-button class=\"btn-action\"\n          x-small icon\n          v-if=\"image.url_preview\"\n          @click=\"$emit('preview', image)\">\n          <v-icon name=\"zoom_in\" />\n        </v-button>\n        <v-button class=\"btn-action\"\n          x-small icon\n          :disabled=\"!image.url_download\"\n          @click=\"$emit('select', image)\">\n          <v-icon :name=\"isSelected?'check_circle':'radio_button_unchecked'\" />\n        </v-button>\n      </div>\n    </div>\n  </v-card>\n</template>\n\n<script>\nexport default {\n  name: 'ris-image',\n  props: {\n    image: {\n      type: Object,\n      required: true\n    },\n    imagesSelected: {\n      type: Array\n    }\n  },\n  data() {\n    return {\n      height: 'auto',\n      needsSetHeight: true,\n    }\n  },\n  computed: {\n    isSelected() { return this.imagesSelected.includes(this.image.id) },\n  },\n  methods: {\n    triggerRender() {\n      this.height = 'auto';\n      this.$refs.img.dataset.risRendered = true\n      setTimeout(() => this.$el.dataset.risRendered = true, 500) // Wait 50ms before showing checkered bg\n    }\n  },\n  /**\n   * A Photo is 1600x1200px, but we only have space for an image of 400px wide.\n   * To find the new height of the image while preserving the aspect ratio\n   * Follow this calculation: ((origHeight / origWidth) x newWidth) = newHeight\n   * Flip based on landscape or portrait\n   */\n  mounted() {\n    const width = this.$el.clientWidth\n    const oldWidth = this.image.width\n    const oldHeight = this.image.height\n    this.height = Math.round((oldHeight / oldWidth) * width) + 'px'\n  }\n}\n</script>\n\n<style scoped>\n.btn-action {\n  padding: 0;\n  min-width: 0;\n\n  --v-button-color: #fff;\n  --v-button-color-hover: #ffffff99;\n  --v-button-color-activated: #ffffff99;\n  --v-button-color-disabled: #ffffffaa;\n\n  --v-button-background-color: transparent;\n  --v-button-background-color-hover: transparent;\n  --v-button-background-color-activated: transparent;\n  --v-button-background-color-disabled: transparent;\n}\n\n.btn-action:deep(.button.x-small) {\n  padding: 0;\n}\n\n.btn-action-icon {\n  margin-right: 5px;\n}\n\n.attribution-link {\n  max-width: 145px;\n  white-space: nowrap;\n  text-overflow: ellipsis;\n  overflow: hidden;\n}\n\n.container .v-card {\n  --ris-transition-time: 0.5s;\n  --v-card-min-width: 0;\n  --v-card-padding: 15px;\n  background: var(--background-normal);\n  break-inside: avoid-column;\n  margin-bottom: 5%;\n  position: relative;\n  overflow: hidden;\n  border-radius: var(--border-radius);\n  transition: transform var(--ris-transition-time);\n}\n\n.container .v-card img {\n  width: 100%;\n  height: auto;\n  vertical-align: middle;\n  border-radius: 0 !important;\n\n  opacity: 0;\n  transition: opacity var(--ris-transition-time);\n\n}\n\n.container .v-card img[data-ris-rendered=\"true\"] {\n  opacity: 1;\n}\n\n.container .v-card:hover {\n  transform: scale(0.975);\n}\n\n.card-hover-details {\n  position: absolute;\n  top: 0;\n  left: 0;\n  bottom: 0;\n  background-image: linear-gradient(0, black -25%, transparent 75%);\n  height: 100%;\n  width: 100%;\n  padding: calc(var(--v-card-padding) / 2);\n\n  display: flex;\n  justify-content: space-between;\n  align-items: flex-end;\n\n  opacity: 0;\n  pointer-events: none;\n}\n\n.card-hover-details--active,\n.v-card:hover .card-hover-details {\n  opacity: 1;\n  pointer-events: all;\n}\n\n.v-card,\n.v-card--is-selected,\n.card-hover-details,\n.v-card:hover .card-hover-details {\n  transition: all var(--ris-transition-time);\n}\n\n.container .v-card[data-ris-rendered=\"true\"] {\n  --checkerSize: 10px;\n  --checkerColor: lightgrey;\n  --checkerAltColor: var(--background-normal);\n\n  background-image:\n    linear-gradient(45deg, var(--checkerColor) 25%, transparent 25%),\n    linear-gradient(135deg, var(--checkerColor) 25%, transparent 25%),\n    linear-gradient(45deg, transparent 75%, var(--checkerColor) 75%),\n    linear-gradient(135deg, transparent 75%, var(--checkerColor) 75%);\n  background-color: var(--checkerAltColor);\n\n  background-size:\n    calc(2 * var(--checkerSize)) calc(2 * var(--checkerSize));\n\n  background-position:\n    0 0,\n    var(--checkerSize) 0,\n    var(--checkerSize) calc(-1 * var(--checkerSize)),\n    0px var(--checkerSize);\n\n}\n</style>\n","<template>\n  <div>\n    <ris-image-preview\n      v-if=\"previewImage\"\n      :image=\"previewImage\"\n      @close=\"previewImage=null\"\n      @keyup.esc.prevent=\"previewImage=null\" />\n    <div class=\"image-grid\" v-if=\"images && images.length > 0\">\n      <ris-image\n        v-for=\"(image, i) in images\"\n        :key=\"`${i}__${image.url_thumb}`\"\n        :image=\"image\"\n        :images-selected=\"imagesSelected\"\n        @preview=\"previewImage=image\"\n        @select=\"$emit('select',image)\" />\n    </div>\n  </div>\n</template>\n\n<script>\nimport RISImagePreview from './RISImagePreview.vue';\nimport RISImage from './RISImage.vue'\n\nexport default {\n  name: 'ris-image-grid',\n  components: {\n    'ris-image-preview': RISImagePreview,\n    'ris-image': RISImage\n  },\n  props: {\n    images: {\n      type: Array,\n      required: true\n    },\n    imagesSelected: {\n      type: Array\n    }\n  },\n  data() {\n    return {\n      previewImage: null\n    }\n  }\n}\n</script>\n\n<style scoped>\n.image-grid {\n  column-count: 1;\n}\n\n/* Extra small devices (phones, 600px and down) */\n@media only screen and (min-width: 600px) {\n  .image-grid {\n    column-count: 2;\n  }\n}\n\n/* Large devices (laptops/desktops, 992px and up) */\n@media only screen and (min-width: 992px) {\n  .image-grid {\n    column-count: 3;\n  }\n}\n</style>\n","<template>\n  <div>\n    <ris-image-preview\n      v-if=\"previewImage\"\n      :image=\"previewImage\"\n      @close=\"previewImage=null\"\n      @keyup.esc.prevent=\"previewImage=null\" />\n    <div class=\"image-grid\" v-if=\"images && images.length > 0\">\n      <ris-image\n        v-for=\"(image, i) in images\"\n        :key=\"`${i}__${image.url_thumb}`\"\n        :image=\"image\"\n        :images-selected=\"imagesSelected\"\n        @preview=\"previewImage=image\"\n        @select=\"$emit('select',image)\" />\n    </div>\n  </div>\n</template>\n\n<script>\nimport RISImagePreview from './RISImagePreview.vue';\nimport RISImage from './RISImage.vue'\n\nexport default {\n  name: 'ris-image-grid',\n  components: {\n    'ris-image-preview': RISImagePreview,\n    'ris-image': RISImage\n  },\n  props: {\n    images: {\n      type: Array,\n      required: true\n    },\n    imagesSelected: {\n      type: Array\n    }\n  },\n  data() {\n    return {\n      previewImage: null\n    }\n  }\n}\n</script>\n\n<style scoped>\n.image-grid {\n  column-count: 1;\n}\n\n/* Extra small devices (phones, 600px and down) */\n@media only screen and (min-width: 600px) {\n  .image-grid {\n    column-count: 2;\n  }\n}\n\n/* Large devices (laptops/desktops, 992px and up) */\n@media only screen and (min-width: 992px) {\n  .image-grid {\n    column-count: 3;\n  }\n}\n</style>\n","/**\n * Solution to allow querying of locally cached data rather than always\n * going to a provider to fetch fresh data.\n *\n * Data will persist for length of session.\n */\nexport default class QueryCache {\n\n  public provider: string\n\n  /**\n   * The name of the provider in lower-case\n   *\n   * @param {String} providerName\n   */\n  constructor (providerName: string) {\n    this.provider = providerName\n  }\n  /**\n   * Passing in the query URL\n   *\n   * @param {String} query\n   */\n  exists(queryStr: string): boolean {\n    return this.fetch(queryStr) ? true : false\n  }\n  /**\n   * Passing in the query URL\n   *\n   * @param {String} query\n   */\n  fetch(queryStr: string): any {\n    const data: string | null = sessionStorage.getItem(queryStr)\n    return data ? JSON.parse(data) : null\n  }\n  /**\n   * Passing in the query URL & data to save\n   *\n   * @param {String} query\n   * @param {Any} data\n   */\n  save(queryStr: string, data: any): void {\n    return sessionStorage.setItem(queryStr, JSON.stringify(data))\n  }\n}\n","import QueryCache from '../classes/QueryCache.ts'\n\nexport default {\n  data() {\n    return {\n      apiPrefix: '/resauce-image-scout',\n      providerList: [],\n      providerSelected: null,\n    }\n  },\n  computed: {\n    queryCache() {\n      return new QueryCache(this.providerSelected)\n    }\n  },\n  methods: {\n    getProviders() {\n      return this.api.get(`${this.apiPrefix}/providers`)\n        .then(({ data }) => {\n          this.providerList = data.data.filter(i => i.is_configured)\n          this.providerSelected = this.providerList[0].key\n        })\n        .catch(err => console.error('ðŸŽ¨âŒ Fetching Providers Failed', err))\n    },\n    fetchFromCache(queryUrl) {\n      return new Promise((resolve, reject) => {\n        try {\n          const data = this.queryCache.fetch(queryUrl)\n          resolve(data)\n        } catch (err) {\n          reject(err)\n        }\n      })\n    },\n    getSearch(query, page) {\n      const queryUrl = `${this.apiPrefix}/providers/${this.providerSelected}/search?query=${query}&page=${page}`\n      if (this.queryCache.exists(queryUrl)) {\n        console.info('ðŸŽ¨ Searching cache', query, page)\n        return this.fetchFromCache(queryUrl)\n          .then(data => data);\n      }\n      console.info('ðŸŽ¨ Searching provider', query, page)\n      return this.api.get(queryUrl)\n        .then(({ data }) => {\n          this.queryCache.save(queryUrl, data)\n          return data\n        })\n    },\n    getFeatured() {\n      const queryUrl = `${this.apiPrefix}/providers/${this.providerSelected}/featured`\n      if (this.queryCache.exists(queryUrl)) {\n        console.info('ðŸŽ¨ Loading featured from cache')\n        return this.fetchFromCache(queryUrl)\n          .then(data => data)\n      }\n      console.info('ðŸŽ¨ Loading featured from provider')\n      return this.api.get(queryUrl)\n        .then(({ data }) => {\n          this.queryCache.save(queryUrl, data)\n          return data\n        })\n    },\n    triggerDownload(image, access_token) {\n      const queryUrl = `${this.apiPrefix}/providers/${this.providerSelected}/download`\n      return this.api.post(queryUrl, { image, access_token })\n        .then(({ data }) => {\n          return data\n        })\n    }\n  }\n}\n","<template>\n  <div class=\"v-resauce-image-scout\">\n    <div class=\"display\">\n      <v-avatar class=\"v-avatar\" x-large>\n        <img v-if=\"value\" :src=\"`/assets/${value}?key=system-medium-cover&access_token=${user_access_token}`\" />\n        <v-icon v-else name=\"image_search\"></v-icon>\n      </v-avatar>\n      <v-button @click=\"isModalOpen=true\" :outlined=\"true\" :dashed=\"value?false:true\" small>\n        {{value ? 'Replace Image' : 'Browse Images'}}\n      </v-button>\n    </div>\n    <v-drawer\n      class=\"v-drawer\"\n      title=\"Image Scout\"\n      icon=\"image_search\"\n      v-model=\"isModalOpen\"\n      @cancel=\"isModalOpen = false\">\n      <template #actions>\n        <v-button\n          @click=\"downloadSelected\"\n          icon\n          rounded\n          primary\n          v-tooltip.bottom=\"'Save'\">\n          <v-icon name=\"done\" />\n        </v-button>\n      </template>\n      <ris-fullpage-loader v-if=\"processing\">\n        Please wait while we process your request...\n      </ris-fullpage-loader>\n      <div class=\"drawer--content\">\n        <div class=\"drawer--search\">\n          <div class=\"header-search-area\">\n            <v-input\n              v-model=\"search\"\n              class=\"header-search--bar\"\n              placeholder=\"Search for image keywords...\"\n              @keyup.enter=\"getPhotos(search, providerSelected)\">\n              <template v-slot:append>\n                <v-icon name=\"search\"></v-icon>\n              </template>\n            </v-input>\n            <div class=\"header-search--provider\">\n              <v-select\n                v-model=\"providerSelected\"\n                :items=\"providerList\"\n                item-value=\"key\"\n                item-text=\"name\"\n                @input=\"search.length > 0 ? getPhotos(search, providerSelected) : getProviderFeaturedPhotos()\">\n              </v-select>\n            </div>\n          </div>\n          <p v-if=\"countOfPages\" class=\"header-search-detail\">\n            {{providerLastSelected.name}} returned {{countOfImages.toLocaleString()}} results for \"{{last_used_query}}\"\n            in {{request_time}} seconds\n          </p>\n        </div>\n\n        <div class=\"drawer--images\" v-if=\"images && images.length > 0\">\n          <ris-image-grid\n            :images=\"images\"\n            :images-selected=\"imagesSelected\"\n            @select=\"image => selectImage(image)\" />\n          <div class=\"v-paginator\" v-if=\"countOfPages && countOfPages > 1\">\n            <v-pagination\n              v-model=\"current_page\"\n              :length=\"countOfPages\"\n              :total-visible=\"5\"\n              :show-first-last=\"true\"\n              @input=\"newPage => getPhotos(last_used_query, last_used_provider, newPage)\"></v-pagination>\n          </div>\n          <p class=\"api-supplier\">\n            Image library powered by\n            <a :href=\"providerLastSelected.url\" target=\"_BLANK\">{{providerLastSelected.name}}</a>\n          </p>\n        </div>\n        <div class=\"container-error\" v-else>\n          <v-info icon=\"image_search\" title=\"No results\" type=\"warning\">\n            Sorry, we couldn't retrieve any images for\n            you, please try to refine your search\n          </v-info>\n        </div>\n      </div>\n    </v-drawer>\n\n  </div>\n</template>\n\n<script>\nimport RISFullpageLoader from './components/RISFullpageLoader.vue';\nimport RISImageGrid from './components/RISImageGrid.vue';\n\nimport apiImageScout from './api/image-scout';\n\nexport default {\n  name: 'resauce-image-scout',\n  inject: ['api'],\n  emits: ['input'],\n  components: {\n    'ris-fullpage-loader': RISFullpageLoader,\n    'ris-image-grid': RISImageGrid,\n  },\n  mixins: [\n    apiImageScout\n  ],\n  props: ['value', 'type', 'group'],\n  data() {\n    return {\n      search: '',\n      last_used_query: '',\n      last_used_provider: null,\n\n      isModalOpen: false,\n      processing: false,\n\n      imagesSelected: [],\n\n      images: null,\n      countOfPages: null,\n      countOfImages: null,\n      current_page: 1,\n      fetch_limit: 30,\n      request_time: 0,\n    }\n  },\n  computed: {\n    providerLastSelected() {\n      return this.last_used_provider ?\n        this.providerList.find(i => i.key === this.last_used_provider) :\n        this.providerList.find(i => i.key === this.providerSelected)\n    },\n    user_access_token() {\n      return this.api.defaults.headers.common.Authorization.replace(\"Bearer \", '')\n    }\n  },\n  methods: {\n    selectImage(image) {\n      // If only one, then only allow one item in the array, if more than one, then add to array.\n      const imageId = image.id\n      if (this.group === 'files') {\n        if (this.imagesSelected.includes(imageId)) {\n          this.imagesSelected.splice(this.imagesSelected.indexOf(imageId), 1)\n        } else {\n          this.imagesSelected.push(imageId)\n        }\n      } else { // single file\n        if (this.imagesSelected.includes(imageId)) {\n          this.imagesSelected = []\n        } else {\n          this.imagesSelected = []\n          this.imagesSelected.push(imageId)\n        }\n      }\n    },\n    downloadSelected() {\n      this.processing = true\n      const image = this.images.find(i => i.id === this.imagesSelected[0]) // currently only downloading one image\n      this.triggerDownload(image, this.user_access_token)\n        .then(({ data }) => {\n          this.$emit('input', data.data.id)\n          this.processing = false\n          this.isModalOpen = false\n        })\n        .catch(err => console.error('ðŸŽ¨ Failed to import image'))\n    },\n    getPhotos(query, provider, page = 1) {\n      if (!query) { this.images = null }\n      if (query.length < 1) { return this.getProviderFeaturedPhotos() }\n\n      this.imagesSelected = [] // Reset selected images so as to not cause confusion\n\n      this.search = this.last_used_query = query\n      this.providerSelected = this.last_used_provider = provider\n      this.current_page = page\n\n      this.processing = true\n      const timerStart = performance.now()\n      this.getSearch(query, page)\n        .then(({ data }) => {\n          this.countOfImages = data.countOfImages\n          this.countOfPages = data.countOfPages\n          this.images = data.images\n\n          this.processing = false\n          const timerEnd = performance.now()\n          this.request_time = parseFloat((timerEnd - timerStart) / 1000).toFixed(12)\n        })\n    },\n    getProviderFeaturedPhotos() {\n      this.processing = true\n      this.getFeatured()\n        .then(({ data }) => {\n          this.countOfImages = data.countOfImages\n          this.countOfPages = data.countOfPages\n          this.images = data.images\n\n          this.processing = false\n        })\n    },\n  },\n  mounted() {\n    this.getProviders().then(() => this.getProviderFeaturedPhotos())\n  }\n}\n</script>\n\n<style scoped>\n.display {\n  display: flex;\n}\n\n.v-avatar {\n  margin-right: var(--input-padding);\n}\n\n/* Modal Stuff */\n.api-supplier {\n  text-align: center;\n  font-size: 8px;\n  text-transform: uppercase;\n  letter-spacing: 1px;\n  margin-top: calc(var(--v-card-padding) * 2);\n}\n\n.icon-search {\n  color: var(--background-normal);\n}\n\n.v-drawer {\n  position: relative;\n}\n\n.drawer--content {\n  padding: var(--v-card-padding);\n}\n\n.ris-fullpage-loader {\n  position: absolute;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  flex-direction: column;\n  width: 100%;\n  height: 100%;\n  top: 0;\n  left: 0;\n  right: 0;\n  bottom: 0;\n  background: var(--background-normal);\n  z-index: 1;\n  opacity: 0.95;\n}\n\n.header-search-area {\n  display: flex;\n}\n\n.header-search-detail {\n  font-size: 10px;\n  color: var(--border-normal-alt);\n}\n\n.header-search--provider {\n  min-width: 25%;\n  margin-left: 15px;\n}\n\n.v-paginator {\n  margin: var(--v-card-padding) auto;\n  margin-top: calc(var(--v-card-padding) * 2);\n  display: flex;\n  justify-content: center;\n  align-items: center;\n}\n\n.v-pagination {\n  margin: auto;\n}\n\n.drawer--images {\n  margin: var(--v-card-padding) 0;\n}\n\n.container-error {\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  text-align: center;\n  flex-direction: column;\n  height: calc(100vh - 30vh);\n}\n</style>\n","<template>\n  <div class=\"v-resauce-image-scout\">\n    <div class=\"display\">\n      <v-avatar class=\"v-avatar\" x-large>\n        <img v-if=\"value\" :src=\"`/assets/${value}?key=system-medium-cover&access_token=${user_access_token}`\" />\n        <v-icon v-else name=\"image_search\"></v-icon>\n      </v-avatar>\n      <v-button @click=\"isModalOpen=true\" :outlined=\"true\" :dashed=\"value?false:true\" small>\n        {{value ? 'Replace Image' : 'Browse Images'}}\n      </v-button>\n    </div>\n    <v-drawer\n      class=\"v-drawer\"\n      title=\"Image Scout\"\n      icon=\"image_search\"\n      v-model=\"isModalOpen\"\n      @cancel=\"isModalOpen = false\">\n      <template #actions>\n        <v-button\n          @click=\"downloadSelected\"\n          icon\n          rounded\n          primary\n          v-tooltip.bottom=\"'Save'\">\n          <v-icon name=\"done\" />\n        </v-button>\n      </template>\n      <ris-fullpage-loader v-if=\"processing\">\n        Please wait while we process your request...\n      </ris-fullpage-loader>\n      <div class=\"drawer--content\">\n        <div class=\"drawer--search\">\n          <div class=\"header-search-area\">\n            <v-input\n              v-model=\"search\"\n              class=\"header-search--bar\"\n              placeholder=\"Search for image keywords...\"\n              @keyup.enter=\"getPhotos(search, providerSelected)\">\n              <template v-slot:append>\n                <v-icon name=\"search\"></v-icon>\n              </template>\n            </v-input>\n            <div class=\"header-search--provider\">\n              <v-select\n                v-model=\"providerSelected\"\n                :items=\"providerList\"\n                item-value=\"key\"\n                item-text=\"name\"\n                @input=\"search.length > 0 ? getPhotos(search, providerSelected) : getProviderFeaturedPhotos()\">\n              </v-select>\n            </div>\n          </div>\n          <p v-if=\"countOfPages\" class=\"header-search-detail\">\n            {{providerLastSelected.name}} returned {{countOfImages.toLocaleString()}} results for \"{{last_used_query}}\"\n            in {{request_time}} seconds\n          </p>\n        </div>\n\n        <div class=\"drawer--images\" v-if=\"images && images.length > 0\">\n          <ris-image-grid\n            :images=\"images\"\n            :images-selected=\"imagesSelected\"\n            @select=\"image => selectImage(image)\" />\n          <div class=\"v-paginator\" v-if=\"countOfPages && countOfPages > 1\">\n            <v-pagination\n              v-model=\"current_page\"\n              :length=\"countOfPages\"\n              :total-visible=\"5\"\n              :show-first-last=\"true\"\n              @input=\"newPage => getPhotos(last_used_query, last_used_provider, newPage)\"></v-pagination>\n          </div>\n          <p class=\"api-supplier\">\n            Image library powered by\n            <a :href=\"providerLastSelected.url\" target=\"_BLANK\">{{providerLastSelected.name}}</a>\n          </p>\n        </div>\n        <div class=\"container-error\" v-else>\n          <v-info icon=\"image_search\" title=\"No results\" type=\"warning\">\n            Sorry, we couldn't retrieve any images for\n            you, please try to refine your search\n          </v-info>\n        </div>\n      </div>\n    </v-drawer>\n\n  </div>\n</template>\n\n<script>\nimport RISFullpageLoader from './components/RISFullpageLoader.vue';\nimport RISImageGrid from './components/RISImageGrid.vue';\n\nimport apiImageScout from './api/image-scout';\n\nexport default {\n  name: 'resauce-image-scout',\n  inject: ['api'],\n  emits: ['input'],\n  components: {\n    'ris-fullpage-loader': RISFullpageLoader,\n    'ris-image-grid': RISImageGrid,\n  },\n  mixins: [\n    apiImageScout\n  ],\n  props: ['value', 'type', 'group'],\n  data() {\n    return {\n      search: '',\n      last_used_query: '',\n      last_used_provider: null,\n\n      isModalOpen: false,\n      processing: false,\n\n      imagesSelected: [],\n\n      images: null,\n      countOfPages: null,\n      countOfImages: null,\n      current_page: 1,\n      fetch_limit: 30,\n      request_time: 0,\n    }\n  },\n  computed: {\n    providerLastSelected() {\n      return this.last_used_provider ?\n        this.providerList.find(i => i.key === this.last_used_provider) :\n        this.providerList.find(i => i.key === this.providerSelected)\n    },\n    user_access_token() {\n      return this.api.defaults.headers.common.Authorization.replace(\"Bearer \", '')\n    }\n  },\n  methods: {\n    selectImage(image) {\n      // If only one, then only allow one item in the array, if more than one, then add to array.\n      const imageId = image.id\n      if (this.group === 'files') {\n        if (this.imagesSelected.includes(imageId)) {\n          this.imagesSelected.splice(this.imagesSelected.indexOf(imageId), 1)\n        } else {\n          this.imagesSelected.push(imageId)\n        }\n      } else { // single file\n        if (this.imagesSelected.includes(imageId)) {\n          this.imagesSelected = []\n        } else {\n          this.imagesSelected = []\n          this.imagesSelected.push(imageId)\n        }\n      }\n    },\n    downloadSelected() {\n      this.processing = true\n      const image = this.images.find(i => i.id === this.imagesSelected[0]) // currently only downloading one image\n      this.triggerDownload(image, this.user_access_token)\n        .then(({ data }) => {\n          this.$emit('input', data.data.id)\n          this.processing = false\n          this.isModalOpen = false\n        })\n        .catch(err => console.error('ðŸŽ¨ Failed to import image'))\n    },\n    getPhotos(query, provider, page = 1) {\n      if (!query) { this.images = null }\n      if (query.length < 1) { return this.getProviderFeaturedPhotos() }\n\n      this.imagesSelected = [] // Reset selected images so as to not cause confusion\n\n      this.search = this.last_used_query = query\n      this.providerSelected = this.last_used_provider = provider\n      this.current_page = page\n\n      this.processing = true\n      const timerStart = performance.now()\n      this.getSearch(query, page)\n        .then(({ data }) => {\n          this.countOfImages = data.countOfImages\n          this.countOfPages = data.countOfPages\n          this.images = data.images\n\n          this.processing = false\n          const timerEnd = performance.now()\n          this.request_time = parseFloat((timerEnd - timerStart) / 1000).toFixed(12)\n        })\n    },\n    getProviderFeaturedPhotos() {\n      this.processing = true\n      this.getFeatured()\n        .then(({ data }) => {\n          this.countOfImages = data.countOfImages\n          this.countOfPages = data.countOfPages\n          this.images = data.images\n\n          this.processing = false\n        })\n    },\n  },\n  mounted() {\n    this.getProviders().then(() => this.getProviderFeaturedPhotos())\n  }\n}\n</script>\n\n<style scoped>\n.display {\n  display: flex;\n}\n\n.v-avatar {\n  margin-right: var(--input-padding);\n}\n\n/* Modal Stuff */\n.api-supplier {\n  text-align: center;\n  font-size: 8px;\n  text-transform: uppercase;\n  letter-spacing: 1px;\n  margin-top: calc(var(--v-card-padding) * 2);\n}\n\n.icon-search {\n  color: var(--background-normal);\n}\n\n.v-drawer {\n  position: relative;\n}\n\n.drawer--content {\n  padding: var(--v-card-padding);\n}\n\n.ris-fullpage-loader {\n  position: absolute;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  flex-direction: column;\n  width: 100%;\n  height: 100%;\n  top: 0;\n  left: 0;\n  right: 0;\n  bottom: 0;\n  background: var(--background-normal);\n  z-index: 1;\n  opacity: 0.95;\n}\n\n.header-search-area {\n  display: flex;\n}\n\n.header-search-detail {\n  font-size: 10px;\n  color: var(--border-normal-alt);\n}\n\n.header-search--provider {\n  min-width: 25%;\n  margin-left: 15px;\n}\n\n.v-paginator {\n  margin: var(--v-card-padding) auto;\n  margin-top: calc(var(--v-card-padding) * 2);\n  display: flex;\n  justify-content: center;\n  align-items: center;\n}\n\n.v-pagination {\n  margin: auto;\n}\n\n.drawer--images {\n  margin: var(--v-card-padding) 0;\n}\n\n.container-error {\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  text-align: center;\n  flex-direction: column;\n  height: calc(100vh - 30vh);\n}\n</style>\n","import { defineInterface } from '@directus/extensions-sdk';\nimport InterfaceComponent from './interface.vue';\n\nexport default defineInterface({\n  id: 'resauce-image-scout',\n  name: 'Image Scout',\n  icon: 'image_search',\n  description: 'Search and use images from online libraries',\n  component: InterfaceComponent,\n  options: null,\n  types: ['uuid'],\n  localTypes: ['file', 'files'],\n  group: 'relational',\n  recommendedDisplays: ['image'],\n  relational: true,\n})\n"],"names":["script$4","name","_hoisted_1","class","e","t","n","r","document","a","s","prepend","d","singleTag","i","container","querySelector","getElementsByTagName","u","indexOf","push","c","charCodeAt","substring","styleSheet","cssText","appendChild","createTextNode","createElement","setAttribute","attributes","Object","keys","length","insertAdjacentElement","_openBlock","_createElementBlock","_createVNode","_component_v_progress_circular","indeterminate","_createElementVNode","_renderSlot","_ctx","$slots","script$3","props","image","type","required","_createBlock","_component_v_overlay","active","$props","onClick","_cache","$event","$emit","src","url_preview","script$2","imagesSelected","Array","data","height","needsSetHeight","computed","isSelected","this","includes","id","methods","triggerRender","$refs","img","dataset","risRendered","setTimeout","$el","mounted","width","clientWidth","oldWidth","oldHeight","Math","round","_hoisted_2","_component_v_card","$options","ref","style","$data","url_thumb","alt","description","onLoad","args","_normalizeClass","_component_v_button","href","attribution","url","title","_component_v_icon","_toDisplayString","icon","disabled","url_download","script$1","components","RISImagePreview","RISImage","images","previewImage","_component_ris_image_preview","onClose","onKeyup","_Fragment","_renderList","_component_ris_image","key","onPreview","onSelect","QueryCache","constructor","providerName","provider","exists","queryStr","fetch","sessionStorage","getItem","JSON","parse","save","setItem","stringify","script","inject","emits","RISFullpageLoader","RISImageGrid","mixins","apiPrefix","providerList","providerSelected","queryCache","getProviders","api","get","then","filter","is_configured","catch","err","console","error","fetchFromCache","queryUrl","Promise","resolve","reject","getSearch","query","page","info","getFeatured","triggerDownload","access_token","post","search","last_used_query","last_used_provider","isModalOpen","processing","countOfPages","countOfImages","current_page","fetch_limit","request_time","providerLastSelected","find","user_access_token","defaults","headers","common","Authorization","replace","selectImage","imageId","group","splice","downloadSelected","getPhotos","getProviderFeaturedPhotos","timerStart","performance","now","timerEnd","parseFloat","toFixed","_hoisted_4","_hoisted_5","_hoisted_6","_hoisted_7","_hoisted_11","_component_v_avatar","value","outlined","dashed","small","_component_v_drawer","onCancel","actions","rounded","primary","_component_ris_fullpage_loader","_component_v_input","placeholder","_withKeys","append","_component_v_select","items","onInput","_hoisted_8","toLocaleString","_hoisted_9","_component_ris_image_grid","_hoisted_10","_component_v_pagination","newPage","target","_hoisted_12","_hoisted_13","_component_v_info","index","defineInterface","component","InterfaceComponent","options","types","localTypes","recommendedDisplays","relational"],"mappings":"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"}